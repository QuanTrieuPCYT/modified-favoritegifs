(function(o,i,r,n,h,l,d,s){"use strict";function g(e){for(let t of e.embeds){if(t.type==="gifv")return{url:t.url,width:t.thumbnail.width,height:t.thumbnail.height,format:2};if(t.type==="image"&&t.url.endsWith(".gif"))return{url:t.url,width:t.image.width,height:t.image.height,format:1}}for(let t of e.attachments)if(t.url.endsWith(".gif"))return{url:t.url,width:t.width,height:t.height,format:1};return null}const a=r.findByProps("openLazy","hideActionSheet"),{FormRow:m,FormIcon:p}=h.Forms,f=r.findByStoreName("UserSettingsProtoStore").frecencyWithoutFetchingLatest,y=i.before("openLazy",a,function(e){const[t,w,F]=e;w==="MessageLongPressActionSheet"&&t.then(function(b){const A=i.after("default",b,function(L,G){n.React.useEffect(function(){return function(){A()}},[]);let[P,c]=G.props?.children?.props?.children?.props?.children;const u=P?.props?.message??F?.message;!c||!u||!g(u)||c.unshift(n.React.createElement(m,{label:"Add GIF to Favorites",leading:n.React.createElement(p,{style:{opacity:1},source:l.getAssetIDByName("ic_star_filled")}),onPress:function(){a.hideActionSheet(),s.logger.log("Methods:");const S=Object.getOwnPropertyNames(Object.getPrototypeOf(f.favoriteGifs)).filter(function(I){return typeof f.favoriteGifs[I]=="function"});s.logger.log(S),d.showToast("Added GIF to Favorites")}}))})})}),v=function(){return y()};return o.onUnload=v,o})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.assets,vendetta.ui.toasts,vendetta);
