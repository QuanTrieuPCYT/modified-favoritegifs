(function(c,f,u,r,h,p,v,m){"use strict";function y(e){for(let t of e.embeds)if(t.type==="gifv"||t.type==="image"&&t.url.endsWith(".gif"))return t.url;for(let t of e.attachments)if(t.url.endsWith(".gif"))return t.url;return null}function F(e){const t=Object.entries(e.favoriteGifs.gifs);t.sort(function(n,o){return n[1].order-o[1].order}),t.length>2&&(t.pop(),t.shift());const s=t.reduce(function(n,o){let[i,d]=o;return n[i]=d,n},{});return{...e,favoriteGifs:{gifs:s}}}const a=u.findByProps("openLazy","hideActionSheet"),{FormRow:A,FormIcon:S}=h.Forms,b=u.findByStoreName("UserSettingsProtoStore").frecencyWithoutFetchingLatest,G=f.before("openLazy",a,function(e){const[t,s,n]=e;s==="MessageLongPressActionSheet"&&t.then(function(o){const i=f.after("default",o,function(d,L){r.React.useEffect(function(){return function(){i()}},[]);let[U,l]=L.props?.children?.props?.children?.props?.children;const g=U?.props?.message??n?.message;!l||!g||!y(g)||l.unshift(r.React.createElement(A,{label:"Add GIF to Favorites",leading:r.React.createElement(S,{style:{opacity:1},source:p.getAssetIDByName("ic_star_filled")}),onPress:function(){a.hideActionSheet(),v.showToast("Added GIF to Favorites");const B=F(b);m.logger.log(B)}}))})})}),I=function(){return G()};return c.onUnload=I,c})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.assets,vendetta.ui.toasts,vendetta);
