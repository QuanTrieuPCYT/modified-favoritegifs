(function(i,r,n,o,u,h,d,l){"use strict";function g(e){for(let t of e.embeds){if(t.type==="gifv")return{url:t.url,width:t.thumbnail.width,height:t.thumbnail.height,format:2};if(t.type==="image"&&t.url.endsWith(".gif"))return{url:t.url,width:t.image.width,height:t.image.height,format:1}}for(let t of e.attachments)if(t.url.endsWith(".gif"))return{url:t.url,width:t.width,height:t.height,format:1};return null}const s=n.findByProps("openLazy","hideActionSheet"),{FormRow:m,FormIcon:p}=u.Forms;n.findByStoreName("UserSettingsProtoStore").frecencyWithoutFetchingLatest;const y=r.before("openLazy",s,function(e){const[t,w,S]=e;w==="MessageLongPressActionSheet"&&t.then(function(F){const b=r.after("default",F,function(O,P){o.React.useEffect(function(){return function(){b()}},[]);let[A,a]=P.props?.children?.props?.children?.props?.children;const c=A?.props?.message??S?.message;!a||!c||!g(c)||a.unshift(o.React.createElement(m,{label:"Add GIF to Favorites",leading:o.React.createElement(p,{style:{opacity:1},source:h.getAssetIDByName("ic_star_filled")}),onPress:function(){s.hideActionSheet();const f=n.findByStoreName("UserSettingsProtoStore"),I=Object.getOwnPropertyNames(Object.getPrototypeOf(f)).filter(function(L){return typeof f[L]=="function"});l.logger.log(I),d.showToast("Added GIF to Favorites")}}))})})}),v=function(){return y()};return i.onUnload=v,i})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.assets,vendetta.ui.toasts,vendetta);
